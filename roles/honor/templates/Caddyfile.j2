{
	log {
		output file /home/{{main_username}}/caddy/access.log {
			roll_size 10mb
			roll_keep 5
			roll_keep_for 168h
		}
	}
	email {{secret_email}}
}

(headers) {
	header {
		Strict-Transport-Security "max-age=31536000; includeSubdomains"
		X-XSS-Protection "1; mode=block"
		X-Content-Type-Options "nosniff"
		Referrer-Policy "same-origin"
		Content-Security-Policy "frame-ancestors {{secret_personal_url}} *.{{secret_personal_url}}"
		-Server
		Permissions-Policy "geolocation=(self {{secret_personal_url}} *.{{secret_personal_url}}), microphone=()"
	}
}

# HomeAssistant
http://smarthome.{{secret_personal_url}} {
	reverse_proxy http://192.168.30.12:5315
	import headers
}
# Bitwarden
http://bitwarden.{{secret_personal_url}} {
	reverse_proxy http://192.168.30.13:6482
	import headers
}
# FreshRSS
http://news.{{secret_personal_url}} {
	reverse_proxy http://192.168.30.13:8010
	import headers
}
# Code-Server
http://code.{{secret_personal_url}} {
	reverse_proxy http://192.168.30.13:8443
	import headers
}
# Jellyfin
http://media.{{secret_personal_url}} {
	reverse_proxy http://192.168.30.10:8096
	header X-Forwarded-Host {host}
	import headers
}
# Nextcloud
http://cloud.{{secret_personal_url}} {
	reverse_proxy http://192.168.30.11:3491
	import headers
}
# Collabora
http://office.{{secret_personal_url}} {
	encode gzip
	reverse_proxy http://192.168.30.13:9980
	import headers
}
# Organizr
http://dashboard.{{secret_personal_url}} {
	reverse_proxy http://192.168.30.13:5100
	import headers
}
# Photoview
http://photos.{{secret_personal_url}} {
	reverse_proxy http://192.168.30.11:8000
	import headers
}
# Radarr
http://radarr.{{secret_personal_url}} {
	reverse_proxy http://192.168.30.11:7878
	import headers
}
# Sonarr
http://sonarr.{{secret_personal_url}} {
	reverse_proxy http://192.168.30.11:8989
	import headers
}
# Wallabag
http://wallabag.{{secret_personal_url}} {
	reverse_proxy http://192.168.30.13:300
	import headers
}